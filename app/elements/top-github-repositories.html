<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/polymer-jsonp/polymer-jsonp.html">
<link rel="import" href="../elements/github-repository.html">
<link rel="import" href="../elements/language-selector.html">

<polymer-element name="polymer-top-github-repositories"  constructor="TopGithubRepositoriesElement" attributes="language">
  <template>
    <style>
      :host { display: block; }
    </style>
    <div class="container">
      <h1>Top {{language}} Repositories in Github</h1>
      <div class="text-center">
        <a href="https://github.com/paulballesty/paulymer">
          ( <span class="glyphicon glyphicon-link" target="_blank"></span>
          https://github.com/paulballesty/paulymer )
        </a>
      </div>
      <polymer-language-selector languages="{{languages}}" selected="{{language}}">Choose your favourite language</polymer-language-selector>
      <template repeat="{{repository in repositories.data.items}}">
        <polymer-github-repository repository="{{repository}}"></polymer-github-repository>
      </template>
    </div>
    <polymer-jsonp auto url="https://api.github.com/search/repositories?q=language:{{language}}&sort=stars&callback=" response="{{repositories}}"></polymer-jsonp>
  </template>
  <script>
    Polymer('polymer-top-github-repositories', {
      ready: function () {
        this.language = "JavaScript";
        this.languages = ["JavaScript", "Python", "C++", "CSS", "Objective-C", "Java", "Ruby"].sort();
      }
    });
  </script>
</polymer-element>